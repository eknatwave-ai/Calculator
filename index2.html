<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Калькулятор с увеличенной кнопкой 0 и выбором цвета</title>
<style>
  body {
    background-color: #e0e0e0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
  }

  .calculator {
    width: 270px;
    background-color: #f9f9f9;
    border: 12px solid #4f8af2; /* по умолчанию */
    border-radius: 40px;
    padding: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background-color 0.3s, border-color 0.3s;
    --shadow-color: rgba(0,0,0,0.2);
    --hover-bg: #c0c0c0;
    --display-font-size: 24px;
    --button-font-size: 20px;
  }

  #display {
    width: 100%;
    height: 80px;
    font-size: var(--display-font-size, 24px);
    padding: 10px 12px;
    border: 3px solid #4f8af2;
    border-radius: 20px;
    background-color: #ffffff;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
    margin-bottom: 15px;
    overflow-x: auto;
    text-align: right; /* выравнивание по правому краю */
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
  }

  button {
    height: 60px;
    font-size: var(--button-font-size, 20px);
    border: 2px solid #4f8af2;
    border-radius: 14px;
    background-color: #e0e0e0;
    cursor: pointer;
    font-family: Arial, sans-serif;
    transition: transform 0.1s ease, box-shadow 0.1s ease, background-color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  button:active {
    transform: translateY(1px);
    box-shadow: inset 0 2px 4px var(--shadow-color);
  }

  button:hover {
    background-color: var(--hover-bg);
    box-shadow: inset 0 2px 4px var(--shadow-color);
    transform: translateY(-1px);
  }

  /* Стиль для кнопки "0" - занимает две колонки */
  .btn-zero {
    grid-column: span 2; /* занимает две колонки */
    height: 60px; /* высота */
    font-size: var(--button-font-size, 20px); /* размер шрифта */
    border: 2px solid #4f8af2;
    border-radius: 14px;
    background-color: #e0e0e0;
    color: #000;
    font-family: Arial, sans-serif;
    display: flex;
    align-items: center;
    justify-content: flex-start; /* ближе к левому краю */
    padding-left: 23px; /* отступ слева */
    cursor: pointer;
    transition: transform 0.1s ease, box-shadow 0.1s ease;
  }

  /* Круглая кнопка "=" */
  .btn-equal {
    border-radius: 50%;
    width: 60px;
    height: 60px;
    padding: 0;
    font-size: var(--button-font-size, 20px);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Контейнер для выбора цвета */
  .color-selector {
    margin-top: 15px;
    display: flex;
    gap: 10px;
    justify-content: center;
  }

  /* Стили для кнопок выбора цвета */
  .color-btn {
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: Arial, sans-serif;
    font-size: 14px;
    transition: background-color 0.2s;
  }



  /* Цветовые стили для кнопок */
  .color-black { background-color: #000; color: #fff; }
  .color-blue { background-color: #3399ff; color: #fff; }
  .color-white { background-color: #fff; color: #000; }
  .color-gray { background-color: #808080; color: #fff; }

  /* Активный стиль */
  .color-btn:hover { opacity: 0.8; }
</style>
<!-- Подключение math.js -->
<script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.js"></script>
</head>
<body>
<div class="calculator" id="calc-container">
  <label for="display"></label><input type="text" id="display" readonly value="0" />
  <div class="buttons">
    <button onclick="clearAll()">D</button>
    <button onclick="backspace()">⌫</button>
    <button onclick="append('%')">%</button>
    <button onclick="append('÷')">÷</button>

    <button onclick="append('7')">7</button>
    <button onclick="append('8')">8</button>
    <button onclick="append('9')">9</button>
    <button onclick="append('×')">×</button>

    <button onclick="append('4')">4</button>
    <button onclick="append('5')">5</button>
    <button onclick="append('6')">6</button>
    <button onclick="append('-')">−</button>

    <button onclick="append('1')">1</button>
    <button onclick="append('2')">2</button>
    <button onclick="append('3')">3</button>
    <button onclick="append('+')">+</button>

    <!-- Кнопка "0", занимает две колонки -->
    <button class="btn-zero" onclick="append('0')">0</button>
    <button onclick="append('.')">.</button>
    <!-- Операция "=" -->
    <button class="btn-equal" style="grid-column: 4;" onclick="calculate()">=</button>
  </div>
</div>

<!-- Блок выбора цвета -->
<div class="color-selector">
  <button class="color-btn color-black" onclick="setColor('black')">Черный</button>
  <button class="color-btn color-blue" onclick="setColor('blue')">Синий</button>
  <button class="color-btn color-white" onclick="setColor('white')">Белый</button>
  <button class="color-btn color-gray" onclick="setColor('gray')">Серый</button>
</div>

<script>
  let expr = '';

  function updateDisplay() {
    const display = document.getElementById('display');
    if (expr === '') {
      display.value = '0';
    } else {
      display.value = expr;
    }
  }

  function append(val) {
    if (val === '×') {
      expr += '*';
    } else if (val === '÷') {
      expr += '/';
    } else {
      expr += val;
    }
    updateDisplay();
  }

  function clearAll() {
    expr = '';
    updateDisplay();
  }

  function backspace() {
    expr = expr.slice(0, -1);
    updateDisplay();
  }

  function calculate() {
    try {
      expr = math.evaluate(expr).toString();
      updateDisplay();
    } catch (error) {
      expr = 'Ошибка';
      updateDisplay();
    }
  }

  let buttonsBorderColor = '#4f8af2'; // текущий цвет рамки клавиш
  let buttonsColor = '#e0e0e0'; // текущий цвет самих клавиш
  let buttonTextColor = '#000'; // текущий цвет текста на кнопках

  function setColor(color) {
    const container = document.getElementById('calc-container');
    const display = document.getElementById('display');

    // Обновляем цвет рамки клавиш
    if (color === 'black') {
      buttonsBorderColor = '#fff'; // белая рамка для клавиш
      buttonsColor = '#000'; // светло-серый цвет клавиш
      buttonTextColor = '#fff'; // белый текст
      container.style.backgroundColor = '#222';
      container.style.borderColor = '#000';
      display.style.backgroundColor = '#000';
      display.style.color = '#fff';
      display.style.borderColor = '#fff';
      container.style.setProperty('--shadow-color', 'rgba(255,255,255,0.3)');
      container.style.setProperty('--hover-bg', '#333');

    } else if (color === 'blue') {
      buttonsBorderColor = '#fff';
      buttonsColor = '#3399ff'; // синий цвет клавиш
      buttonTextColor = '#fff'; // белый текст
      container.style.backgroundColor = '#4f8af2';
      container.style.borderColor = '#fff';
      display.style.backgroundColor = '#fff';
      display.style.color = '#000';
      display.style.borderColor = '#4f8af2';
      container.style.setProperty('--shadow-color', 'rgba(0,0,0,0.2)');
      container.style.setProperty('--hover-bg', '#1e88e5');

    } else if (color === 'white') {
      buttonsBorderColor = '#4f8af2';
      buttonsColor = '#e0e0e0'; // светло-серый
      buttonTextColor = '#000'; // черный текст
      container.style.backgroundColor = '#f9f9f9';
      container.style.borderColor = '#4f8af2';
      display.style.backgroundColor = '#fff';
      display.style.color = '#000';
      display.style.borderColor = '#4f8af2';
      container.style.setProperty('--shadow-color', 'rgba(0,0,0,0.2)');
      container.style.setProperty('--hover-bg', '#c0c0c0');

    } else if (color === 'gray') {
      buttonsBorderColor = '#363636';
      buttonsColor = '#fff'; //  цвет клавиш
      buttonTextColor = '#5d5c5c'; // цвет текст
      container.style.backgroundColor = '#808080';
      container.style.borderColor = '#434343';
      display.style.backgroundColor = '#fff';
      display.style.color = '#5d5c5c';
      display.style.borderColor = '#434343';
      container.style.setProperty('--shadow-color', 'rgba(0,0,0,0.2)');
      container.style.setProperty('--hover-bg', '#f0f0f0');
    }

    // Обновляем цвет клавиш
    document.querySelectorAll('.buttons button').forEach(btn => {
      btn.style.backgroundColor = buttonsColor;
      btn.style.borderColor = buttonsBorderColor;
      btn.style.color = buttonTextColor;
    });
  }

  // Функции для изменения размера шрифта (внутри программы, без UI)
  function increaseFont() {
    const container = document.getElementById('calc-container');
    let displaySize = parseInt(container.style.getPropertyValue('--display-font-size') || 24);
    let buttonSize = parseInt(container.style.getPropertyValue('--button-font-size') || 20);
    if (displaySize < 32) {
      displaySize += 2;
      buttonSize += 1;
      container.style.setProperty('--display-font-size', displaySize + 'px');
      container.style.setProperty('--button-font-size', buttonSize + 'px');
    }
  }

  function decreaseFont() {
    const container = document.getElementById('calc-container');
    let displaySize = parseInt(container.style.getPropertyValue('--display-font-size') || 24);
    let buttonSize = parseInt(container.style.getPropertyValue('--button-font-size') || 20);
    if (displaySize > 12) {
      displaySize -= 2;
      buttonSize -= 1;
      container.style.setProperty('--display-font-size', displaySize + 'px');
      container.style.setProperty('--button-font-size', buttonSize + 'px');
    }
  }

  // Обработчик события колеса мыши для изменения размера шрифта (скрыто от пользователя)
  const container = document.getElementById('calc-container');1
  container.addEventListener('wheel', function(event) {
    event.preventDefault(); // Предотвращаем стандартный скролл
    if (event.deltaY > 0) {
      decreaseFont(); // Крутим вниз - уменьшаем
    } else {
      increaseFont(); // Крутим вверх - увеличиваем
    }
  });

// Изначально зададим цвета
setColor('black');
</script>
</body>
</html>